{"version":3,"sources":["components/Header/Header.jsx","components/utils/slugify.js","components/CreateContent/CreateContent.jsx","components/utils/processMd.js","components/BlogsList/BlogsList.jsx","components/BlogDetail/BlogDetails.jsx","components/Footer/Footer.jsx","App.js","index.js"],"names":["Header","props","className","onClick","handleNavItemClick","diameter","seed","jsNumberForAddress","userwa","cUsdBalance","slugify","str","toLowerCase","trim","replace","Write","useState","imgUrl","setImgUrl","title","setTitle","content","setContent","showEditView","setShowEditView","converted","setConverted","slug","length","postsCount","handleInputFieldsChange","e","target","name","value","handlePublishBtn","a","getNewlyCreatedPost","src","alt","type","onChange","placeholder","dangerouslySetInnerHTML","__html","html","showdown","Converter","makeHtml","processMd","BlogPreview","useEffect","window","scrollTo","posts","map","blog","coverImgUrl","authorAddress","datePublished","readingTime","minutes","showDetails","getDetails","handleTitleClick","slice","likes","comments","BlogDetails","id","coffeeQty","setCoffeeQty","commentMessage","setCommentMessage","updateState","forceUpdate","useCallback","likePost","includes","unlikePost","sendComment","makeComment","console","log","style","color","href","min","buyCoffee","comment","commenterAddress","Footer","dBlogContractAddress","App","setBlog","setPosts","setPostsCount","activePage","setActivePage","kit","setKit","setCUsdBalance","userWalletAddress","setUserWalletAddress","dBlogContract","setDBlogContract","alertMessage","setalertMessage","showAlertBox","setShowAlertBox","connectWallet","getUserBalance","getFeed","active","alertOn","aletMsg","alertOff","approvePayment","_amount","cUSDContract","web3","eth","Contract","erc20abi","methods","approve","send","from","response","celo","enable","Web3","newKitFromWeb3","getAccounts","accounts","defaultAccount","alert","getTotalBalance","balance","cUSD","shiftedBy","toFixed","DBlogAbi","createPost","Date","toUTCString","getSlugs","call","slugs","getPostLength","_posts","i","postSlug","blogPost","Promise","resolve","reject","getPost","push","all","postFeed","amount","BigNumber","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b4b116af.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Header.scss\";\r\nimport Jazzicon, { jsNumberForAddress } from \"react-jazzicon\";\r\n\r\nconst Header = (props) => {\r\n\r\n  return (\r\n    <div className=\"app__header\">\r\n      <div className=\"app__header-logo\">\r\n        <span>Celo</span>Comm\r\n      </div>\r\n      <div className=\"app__header-nav\">\r\n        <div\r\n          onClick={() => props.handleNavItemClick(\"posts\")}\r\n          className=\"posts\"\r\n        >\r\n          Posts\r\n        </div>\r\n        <div\r\n          onClick={() => props.handleNavItemClick(\"write\")}\r\n          className=\"write\"\r\n        >\r\n          Write\r\n        </div>\r\n        <div className=\"info\">\r\n          <div className=\"header--userIdenticon\">\r\n            <Jazzicon diameter={50} seed={jsNumberForAddress(props.userwa)} />\r\n          </div>\r\n          <div className=\"header--balance\">{props.cUsdBalance} cUSD</div>\r\n        </div>\r\n      </div>     \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","const slugify = (str) =>\r\n  str\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/[^\\w\\s-]/g, \"\")\r\n    .replace(/[\\s_-]+/g, \"-\")\r\n    .replace(/^-+|-+$/g, \"\");\r\n\r\nexport default slugify;\r\n","import React, { useState } from \"react\";\r\nimport showdown from \"showdown\";\r\n\r\nimport \"./CreateContent.scss\";\r\nimport slugify from \"../utils/slugify\";\r\n\r\nconst Write = (props) => {\r\n  const [imgUrl, setImgUrl] = useState();\r\n  const [title, setTitle] = useState();\r\n  const [content, setContent] = useState();\r\n  const [showEditView, setShowEditView] = useState(true);\r\n  const [converted, setConverted] = useState();\r\n\r\n  const slug = title?.length > 1 ? slugify(title + \" \" + props.postsCount) : \"\";\r\n\r\n  const processMd = () => {\r\n    const converter = new showdown.Converter();\r\n    const html = converter.makeHtml(content);\r\n\r\n    setConverted(html);\r\n    setShowEditView(false);\r\n  };\r\n\r\n  const handleInputFieldsChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"imageUrl\") setImgUrl(value);\r\n    if (name === \"title\") setTitle(value);\r\n    if (name === \"content\") setContent(value);\r\n  };\r\n\r\n  const handlePublishBtn = async () => {\r\n    await props.getNewlyCreatedPost(slug, imgUrl, title, content);\r\n    // clears editing fields\r\n    setImgUrl();\r\n    setTitle();\r\n    setContent();\r\n  };\r\n\r\n  return (\r\n    <div className=\"app__writeview\">\r\n      <div className=\"main\">\r\n        {showEditView ? (\r\n          <>\r\n            <div className=\"cover-img\">\r\n              <img src={imgUrl} alt={imgUrl} />\r\n              <input\r\n                type=\"text\"\r\n                name=\"imageUrl\"\r\n                onChange={handleInputFieldsChange}\r\n                value={imgUrl}\r\n                placeholder=\"Start typing image URL to preview image\"\r\n              />\r\n            </div>\r\n            <div className=\"edit-title\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"title\"\r\n                value={title}\r\n                placeholder=\"Title here\"\r\n                onChange={handleInputFieldsChange}\r\n              />\r\n            </div>\r\n            <hr />\r\n            <div className=\"edit-content\">\r\n              <textarea\r\n                name=\"content\"\r\n                value={content}\r\n                onChange={handleInputFieldsChange}\r\n                placeholder=\"Write your content here (in markdown)\"\r\n              />\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className=\"preview\">\r\n            <div className=\"preview-coverImg\">\r\n              <img src={imgUrl} alt={imgUrl} />\r\n            </div>\r\n            <div className=\"preview-title edit-title\">{title}</div>\r\n            <hr />\r\n            <div\r\n              className=\"preview-content\"\r\n              dangerouslySetInnerHTML={{ __html: converted }}\r\n            />\r\n          </div>\r\n        )}\r\n        <div className=\"menu\">\r\n          <div onClick={() => setShowEditView(true)} className=\"write-btn\">\r\n            Write\r\n          </div>\r\n          {title && content && (\r\n            <div onClick={() => processMd()} className=\"preview-btn\">\r\n              Preview\r\n            </div>\r\n          )}\r\n          {title && content && (\r\n            <div className=\"publish-btn\" onClick={() => handlePublishBtn()}>\r\n              Publish\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Write;\r\n","import showdown from \"showdown\"\r\n\r\nconst processMd = (html) => {\r\n  const converter = new showdown.Converter();\r\n  const converted = converter.makeHtml(html);\r\n\r\n  return converted;\r\n}\r\n\r\nexport default processMd;","import React, { useEffect } from \"react\";\r\nimport Jazzicon, { jsNumberForAddress } from \"react-jazzicon\";\r\nimport { readingTime } from \"reading-time-estimator\";\r\nimport processMd from \"../utils/processMd\";\r\n\r\nimport \"./BlogsList.scss\";\r\n\r\nconst BlogPreview = (props) => {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n  const posts = props.posts;\r\n  const handleTitleClick = (blog) => {\r\n    props.showDetails(\"details\");\r\n    props.getDetails(blog);\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"app__blogPreview\">\r\n        <div className=\"app__blogPreview-body\">\r\n          {posts?.map((blog) => (\r\n            <div className=\"app__blogPreview-item\">\r\n              <img src={blog.coverImgUrl} />\r\n              <div className=\"preview-details\">\r\n                <div className=\"pd-authorAvatar\">\r\n                  <Jazzicon\r\n                    diameter={50}\r\n                    seed={jsNumberForAddress(blog.authorAddress)}\r\n                  />\r\n                </div>\r\n                {/* <img src={blog.authoAvatarUrl} /> */}\r\n                <div className=\"preview-content\">\r\n                  <div className=\"preview-datePublished\">\r\n                    {blog.datePublished}\r\n                  </div>\r\n                  <div className=\"preview-readingTime\">\r\n                    {readingTime(blog.content).minutes} min read\r\n                  </div>\r\n                  <div\r\n                    onClick={() => handleTitleClick(blog)}\r\n                    className=\"preview-title\"\r\n                  >\r\n                    {blog.title}\r\n                  </div>\r\n                  <div\r\n                    className=\"preview-content--content\"\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: processMd(blog.content.slice(0, 120) + \" ...\"),\r\n                    }}\r\n                  />\r\n                  <div className=\"preview-bottom\">\r\n                    <div className=\"preview-likes\">‚ù§ {blog.likes.length}</div>\r\n                    <div className=\"preview-comments\">\r\n                      üí¨ {blog.comments.length}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BlogPreview;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { readingTime } from \"reading-time-estimator\";\r\nimport Jazzicon, { jsNumberForAddress } from \"react-jazzicon\";\r\nimport \"./BlogDetails.scss\";\r\nimport processMd from \"../utils/processMd\";\r\n\r\nconst BlogDetails = (props) => {\r\n  const {\r\n    id,\r\n    slug,\r\n    coverImgUrl,\r\n    authorAddress,\r\n    title,\r\n    content,\r\n    datePublished,\r\n    likes,\r\n    comments,\r\n  } = props.blog;\r\n\r\n  const [coffeeQty, setCoffeeQty] = useState(1);\r\n  const [commentMessage, setCommentMessage] = useState();\r\n  const [, updateState] = useState();\r\n\r\n  const forceUpdate = useCallback(() => updateState({}), []);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  const handleCoffeQtyChange = (e) => {\r\n    setCoffeeQty(e.target.value);\r\n  };\r\n\r\n  const buyCoffee = () => {\r\n    props.buyCoffee(slug, coffeeQty);\r\n    console.log(\r\n      \"Successfully bought \" +\r\n        coffeeQty +\r\n        \" coffee for \" +\r\n        authorAddress +\r\n        \"'s post with id: \" +\r\n        id\r\n    );\r\n  };\r\n\r\n  const likePost = async () => {\r\n    likes.includes(props.userwa)\r\n      ? await props.unlikePost(slug)\r\n      : await props.likePost(slug);\r\n\r\n    forceUpdate();\r\n  };\r\n\r\n  const sendComment = async () => {\r\n    await props.makeComment(slug, commentMessage);\r\n    console.log(\"Successfully said \" + commentMessage + \" on post \" + slug);\r\n    setCommentMessage(); // clears edit comment field\r\n  };\r\n\r\n  return (\r\n    <div className=\"app__blogDetail\">\r\n      <div className=\"app__blogDetail-content\">\r\n        <img src={coverImgUrl} />\r\n        <div className=\"info\">\r\n          <div className=\"info-authorAvatar\">          \r\n            <Jazzicon diameter={50} seed={jsNumberForAddress(authorAddress)} />\r\n          </div>\r\n          <div className=\"details\">\r\n            <div className=\"read-time\">\r\n              {readingTime(content).minutes} min read\r\n            </div>\r\n            <div className=\"date-published\">Published on {datePublished}</div>\r\n          </div>\r\n          <div className=\"reactions\">\r\n            <div\r\n              className=\"l-count\"\r\n              style={{ color: likes.includes(props.userwa) ? \"red\" : \"\" }}\r\n              onClick={() => likePost()}\r\n            >\r\n              ‚ù§ {likes.length}\r\n            </div>\r\n            <div className=\"c-count\">\r\n              <a href=\"#comments-section\">üí¨ {comments.length}</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"title\">{title}</div>\r\n        <hr className=\"hr-below-title--bd\" />\r\n        <div\r\n          className=\"content\"\r\n          dangerouslySetInnerHTML={{ __html: processMd(content) }}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"sponsor\">\r\n        <div className=\"sponsor-txt\">Enjoy reading this post?</div>\r\n        <div className=\"sponsor-input\">\r\n          <span>Each cup costs 1 cUSD</span>\r\n          <input\r\n            type=\"number\"\r\n            min={1}\r\n            value={coffeeQty}\r\n            onChange={handleCoffeQtyChange}\r\n          />\r\n        </div>\r\n        <div onClick={() => buyCoffee()} className=\"buy\">\r\n          Buy me a coffee <span>ü•§</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"comments-section\" className=\"comments\">\r\n        <hr />\r\n        <div>\r\n          <textarea\r\n            placeholder=\"Enter your comment here\"\r\n            value={commentMessage}\r\n            onChange={(e) => setCommentMessage(e.target.value)}\r\n          />\r\n          <div className=\"comment-btn\" onClick={() => sendComment()}>\r\n            Comment\r\n          </div>\r\n        </div>\r\n        <div className=\"comment-list\">\r\n          {comments.length > 0 && <p>Comments</p>}\r\n          {comments?.map((comment) => (\r\n            <div className=\"comment-item\">\r\n              <div className=\"author-avatar-c\">\r\n                <Jazzicon\r\n                  diameter={50}\r\n                  seed={jsNumberForAddress(comment.commenterAddress)}\r\n                />\r\n              </div>\r\n              <div className=\"comment-item\">{comment.commentMessage}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogDetails;\r\n","import React from \"react\";\r\nimport \"./Footer.scss\";\r\n\r\nconst Footer = () => {\r\n  return <div className=\"app__footer\"></div>;\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\nimport {\r\n  Header,\r\n  CreateContent,\r\n  BlogsList,\r\n  BlogDetails,\r\n  Footer,\r\n} from \"./components\";\r\nimport \"./App.scss\";\r\nimport DBlogAbi from \"./contract/DBlog.abi.json\";\r\nimport erc20abi from \"./contract/erc20.abi.json\";\r\n\r\nconst ERC20_DECIMALS = 18;\r\nconst dBlogContractAddress = \"0xF431805f4D96144758a160C6b3f0ed78D29b16BA\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\nconst App = () => {\r\n  // vars\r\n  const [blog, setBlog] = useState();\r\n  const [posts, setPosts] = useState();\r\n  const [postsCount, setPostsCount] = useState();\r\n  const [activePage, setActivePage] = useState(\"posts\");\r\n  const [kit, setKit] = useState();\r\n  const [cUsdBalance, setCUsdBalance] = useState(0);\r\n  const [userWalletAddress, setUserWalletAddress] = useState(\r\n    \"0x00000000000000000000\"\r\n  );\r\n  const [dBlogContract, setDBlogContract] = useState();\r\n\r\n  const [alertMessage, setalertMessage] = useState();\r\n  const [showAlertBox, setShowAlertBox] = useState(false);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    connectWallet();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (kit && userWalletAddress) {\r\n      getUserBalance();\r\n    }\r\n  }, [kit, userWalletAddress]);\r\n\r\n  useEffect(() => {\r\n    if (dBlogContract) {\r\n      getFeed();\r\n    }\r\n  }, [dBlogContract]);\r\n\r\n  // //\r\n\r\n  const handleNavItemClick = async (active) => {\r\n    await getFeed();\r\n    setActivePage(active);\r\n  };\r\n\r\n  const alertOn = (aletMsg) => {\r\n    setalertMessage(aletMsg);\r\n    setShowAlertBox(true);\r\n  };\r\n\r\n  const alertOff = () => setShowAlertBox(false);\r\n\r\n  // approve payment before transferring tokens\r\n  const approvePayment = async (_amount) => {\r\n    const cUSDContract = new kit.web3.eth.Contract(\r\n      erc20abi,\r\n      cUSDContractAddress\r\n    );\r\n    const response = await cUSDContract.methods\r\n      .approve(dBlogContractAddress, _amount)\r\n      .send({ from: userWalletAddress });\r\n    return response;\r\n  };\r\n\r\n  // connect wallet to app\r\n  const connectWallet = async () => {\r\n    if (window.celo) {\r\n      alertOn(\"‚ö†Ô∏è Please approve this DApp to use it.\");\r\n      try {\r\n        await window.celo.enable();\r\n        const web3 = new Web3(window.celo);\r\n        let kit = newKitFromWeb3(web3);\r\n\r\n        const accounts = await kit.web3.eth.getAccounts();\r\n        const defaultAccount = accounts[0];\r\n        kit.defaultAccount = defaultAccount;\r\n\r\n        setKit(kit);\r\n        setUserWalletAddress(defaultAccount);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      alert(\r\n        \"You need to install the celo wallet extension in order to use this app\"\r\n      );\r\n    }\r\n  };\r\n\r\n  // get both cUSD balance and RP balance\r\n  const getUserBalance = async () => {\r\n    console.log(\"Getting user balance...\");\r\n    try {\r\n      const balance = await kit.getTotalBalance(userWalletAddress);\r\n      const cUsdBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\r\n      const dBlogContract = new kit.web3.eth.Contract(\r\n        DBlogAbi,\r\n        dBlogContractAddress\r\n      );\r\n\r\n      setCUsdBalance(cUsdBalance);\r\n      setDBlogContract(dBlogContract);\r\n    } catch (error) {\r\n      console.log(\"Error occured while trying to get user balances: \" + error);\r\n    }\r\n  };\r\n\r\n  // create new post\r\n  const getNewlyCreatedPost = async (slug, imgUrl, title, content) => {\r\n    alertOn(\"Creating new post ...\");\r\n    try {\r\n      await dBlogContract.methods\r\n        .createPost(slug, imgUrl, title, content, new Date().toUTCString())\r\n        .send({ from: userWalletAddress });\r\n    } catch (error) {\r\n      console.log(\"New error while creating new post: \" + error);\r\n    }\r\n\r\n    await getFeed();\r\n    setActivePage(\"posts\");\r\n    alertOff();\r\n  };\r\n\r\n  // load all post feed from contract\r\n  const getFeed = async () => {\r\n    alertOn(\"Loading posts ...\");\r\n    const slugs = await dBlogContract.methods.getSlugs().call();\r\n    let postsCount = await dBlogContract.methods.getPostLength().call();\r\n    const _posts = [];\r\n    for (let i = 0; i < slugs.length; i++) {\r\n      let postSlug = slugs[i];\r\n      let blogPost = new Promise(async (resolve, reject) => {\r\n        let getPost = await dBlogContract.methods.getPost(postSlug).call();\r\n        resolve({\r\n          id: getPost[0],\r\n          slug: getPost[1],\r\n          coverImgUrl: getPost[2],\r\n          authorAddress: getPost[3],\r\n          title: getPost[4],\r\n          content: getPost[5],\r\n          datePublished: getPost[6],\r\n          likes: getPost[7],\r\n          comments: getPost[8],\r\n        });\r\n      });\r\n      _posts.push(blogPost);\r\n    }\r\n    const postFeed = await Promise.all(_posts);\r\n    setPosts(postFeed);\r\n    setPostsCount(postsCount);\r\n    alertOff();\r\n  };\r\n\r\n  // like a post with slug @postSlug\r\n  const likePost = async (postSlug) => {\r\n    alertOn(\"Liking this post ...\");\r\n    try {\r\n      await dBlogContract.methods\r\n        .likePost(postSlug)\r\n        .send({ from: userWalletAddress });\r\n    } catch (error) {\r\n      console.log(\"New Error occured while liking post: \" + error);\r\n    }\r\n\r\n    getFeed();\r\n    setActivePage(\"posts\");\r\n    alertOff();\r\n  };\r\n\r\n  // un-like a post with slug @postSlug\r\n  const unlikePost = async (postSlug) => {\r\n    alertOn(\"Un-Liking this post ...\");\r\n    try {\r\n      await dBlogContract.methods\r\n        .unlikePost(postSlug)\r\n        .send({ from: userWalletAddress });\r\n    } catch (error) {\r\n      console.log(\"New Error occured while un-liking this post: \" + error);\r\n    }\r\n\r\n    getFeed();\r\n    setActivePage(\"posts\");\r\n    alertOff();\r\n  };\r\n\r\n  // comment on post\r\n  const makeComment = async (postSlug, comment) => {\r\n    alertOn(\"Saving comment ...\");\r\n    try {\r\n      await dBlogContract.methods\r\n        .makeComment(postSlug, comment)\r\n        .send({ from: userWalletAddress });\r\n    } catch (error) {\r\n      console.log(\"New Error occured while saving comment: \" + error);\r\n    }\r\n\r\n    getFeed();\r\n    setActivePage(\"posts\");\r\n    alertOff();\r\n  };\r\n\r\n  const buyCoffee = async (postSlug, _amount) => {\r\n    alertOn(\"Buying this author a coffee ...\");\r\n    const amount = new BigNumber(_amount).shiftedBy(ERC20_DECIMALS);\r\n    try {\r\n      await approvePayment(amount);\r\n    } catch (error) {\r\n      console.log(\r\n        \"New Error while trying to approve buyCoffee payment: \" + error\r\n      );\r\n    }\r\n\r\n    try {\r\n      await dBlogContract.methods\r\n        .buyCoffee(postSlug, amount)\r\n        .send({ from: userWalletAddress });\r\n    } catch (error) {\r\n      console.log(\r\n        \"New error while trying to pay for coffee via contract: \" + error\r\n      );\r\n    }\r\n\r\n    setTimeout(\r\n      () =>\r\n        alertOn(\"Successfully bought \" + _amount + \" coffee for this author\"),\r\n      () => alertOff(),\r\n      5000\r\n    );\r\n    await getUserBalance();\r\n    setActivePage(\"posts\");\r\n  };\r\n\r\n  //\r\n  return (\r\n    <div>    \r\n      <Header\r\n        cUsdBalance={cUsdBalance}\r\n        userwa={userWalletAddress}\r\n        handleNavItemClick={handleNavItemClick}\r\n      />\r\n      {showAlertBox && (\r\n        <div className=\"alert\">\r\n          <div className=\"\">{alertMessage}</div>\r\n        </div>\r\n      )}\r\n      {activePage === \"write\" && (\r\n        <CreateContent\r\n          postsCount={postsCount}\r\n          getNewlyCreatedPost={getNewlyCreatedPost}\r\n        />\r\n      )}\r\n      {activePage === \"posts\" && (\r\n        <BlogsList\r\n          posts={posts}\r\n          getDetails={setBlog}\r\n          showDetails={handleNavItemClick}\r\n        />\r\n      )}\r\n      {activePage === \"details\" && (\r\n        <BlogDetails\r\n          userwa={userWalletAddress}\r\n          likePost={likePost}\r\n          unlikePost={unlikePost}\r\n          buyCoffee={buyCoffee}\r\n          makeComment={makeComment}\r\n          blog={blog}\r\n        />\r\n      )}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}